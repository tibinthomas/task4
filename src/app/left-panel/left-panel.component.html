<div class="container">
    <div class="row">
      <div class="col-md-4 my-border">
          <form [formGroup]="jobForm" (ngSubmit)="clickingAddNewJob(jobForm.value)">

              <label for="jobName">Job Name*</label>
              <input type="text" name="jobName" id="jobName" formControlName="jobName">
              <p *ngIf="jobForm.controls['jobName'].errors.required && jobForm.controls['jobName'].touched" [style.color]="'red'">Name is required</p>
              <p *ngIf="jobForm.controls['jobName'].touched && !jobForm.controls['jobName'].errors.pattern" [style.color]="'red'">Invalid name</p>
              <br>
              <div class="row">
                <div class="col-sm-6">
                  <label for="jobType">Job Type*</label>
                  <select name="jobType" id="jobType" formControlName="jobType">
                    <option *ngFor="let jobType of jobTypes">{{jobType}}</option>
                  </select>
              <p *ngIf="jobForm.controls['jobType'].errors.required && jobForm.controls['jobType'].touched" [style.color]="'red'">Name is required</p>
                </div>
                <div class="col-sm-2">
                  <button (click)="clickingPlusButton()" data-toggle="modal" data-target="#exampleModal"> + </button>
                </div>
              </div>
            
            
              <label for="description">Description</label>
              <textarea rows="3" cols="20" name="description" id="description" formControlName="description"></textarea>
              <br>
            
              <button type="submit">Add New Job</button>
            </form>
            
            
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Add New Job Type</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form [formGroup]="addJobTypeForm" (ngSubmit)="addNewJobTypeInPopup(addJobTypeForm.value)">
                        <div class="form-group">
                          <label for="addJobTypeForm" class="form-control-label">Job Type Name: </label>
                          <input type="text" class="form-control" id="addJobTypeForm" formControlName="newJobType">
                        </div>
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Add This Job Type</button>
                    </form>
                    </div>
                  </div>
                  </div>
                </div>
      </div>
      <div class="col-md-8 my-border">
          <div *ngFor="let jobType of jobTypes; let jobTypeIndex = index">
              <label>Job Type: {{ jobType }}</label>
              <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th>Job Name</th>
                      <th>Job Description</th>
                      <th>Date</th>
                      <th>Time</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="!showMoreFlag[jobTypeIndex]">
                    <tr *ngFor="let entity of allEntity; let entityIndex = index">
                      <td *ngIf="entity.jobType===jobType && entity.internalIndex <= 2">{{entity.jobName}}</td>
                      <td *ngIf="entity.jobType===jobType && entity.internalIndex <= 2">{{entity.description}}</td>
                      <td *ngIf="entity.jobType===jobType && entity.internalIndex <= 2">{{entity.date | date:'mediumDate'}}</td>
                      <td *ngIf="entity.jobType===jobType && entity.internalIndex <= 2">{{entity.time}}</td>
                      <td *ngIf="entity.jobType===jobType && entity.internalIndex <= 2"><button type="action">Apply Now</button></td>
                    </tr>
                    <tr>Count: {{count[jobTypeIndex]}}</tr>
                    <tr *ngIf="!showMoreFlag[jobTypeIndex]"><button (click)="showMoreButtonClick(jobTypeIndex)">Show More</button></tr>
                    <tr *ngIf="showMoreFlag[jobTypeIndex]"><button (click)="showTop3ButtonClick(jobTypeIndex)">Show Top 3 Jobs</button></tr>                    
                  </tbody>
                  <tbody *ngIf="showMoreFlag[jobTypeIndex]">
                    <tr *ngFor="let entity of allEntity">
                      <td *ngIf="entity.jobType===jobType">{{entity.jobName}}</td>
                      <td *ngIf="entity.jobType===jobType">{{entity.description}}</td>
                      <td *ngIf="entity.jobType===jobType">{{entity.date}}</td>
                      <td *ngIf="entity.jobType===jobType">{{entity.time}}</td>
                      <td *ngIf="entity.jobType===jobType"><button type="action">Apply Now</button></td>
                    </tr>
                    <tr>Count: {{count[jobTypeIndex]}}</tr>
                    <tr *ngIf="!showMoreFlag[jobTypeIndex]"><button (click)="showMoreButtonClick(jobTypeIndex)">Show More</button></tr>
                    <tr *ngIf="showMoreFlag[jobTypeIndex]"><button (click)="showTop3ButtonClick(jobTypeIndex)">Show Top 3 Jobs</button></tr>
                  </tbody>
                </table>
                <hr>
          </div>
      </div>
    </div>
  </div>
  
  
  